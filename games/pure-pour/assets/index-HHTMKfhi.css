:root{--bg-light: #e8ecef;--bg-mid: #d7dbe0;--frame: rgba(255, 255, 255, .62);--frame-border: rgba(255, 255, 255, .75);--ink: #30353b;--muted: #5f6974;--overlay-bg: rgba(16, 19, 24, .52);--btn-bg: rgba(255, 255, 255, .84);--btn-border: rgba(255, 255, 255, .9);--btn-ink: #2f3840;--btn-primary: #2f6fed}*{box-sizing:border-box}body{margin:0;min-height:100vh;min-height:100dvh;padding:18px 14px;display:flex;justify-content:center;align-items:center;background:radial-gradient(circle at 12% 8%,#f7f9fb 0%,transparent 34%),radial-gradient(circle at 88% 14%,#edf1f5 0%,transparent 30%),linear-gradient(165deg,var(--bg-light),var(--bg-mid));color:var(--ink);font-family:Avenir Next,Trebuchet MS,Gill Sans,sans-serif}#game-shell{position:relative;width:min(97vw,1240px);height:min(calc(100dvh - 18px),980px);display:grid;grid-template-rows:auto minmax(0,1fr);gap:12px}#game-header{background:linear-gradient(150deg,#ffffffd1,#f0f4f8b8);border:1px solid var(--frame-border);border-radius:18px;padding:12px 16px;display:grid;grid-template-columns:minmax(240px,1fr) minmax(320px,460px);gap:12px 14px;box-shadow:0 12px 26px #25313f24}.title-wrap h1{margin:0;font-size:clamp(1.15rem,2.3vw,1.7rem);letter-spacing:.02em}.title-wrap p{margin:4px 0 0;font-size:.92rem;color:var(--muted)}.legend{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}.chip{display:inline-flex;align-items:center;gap:7px;padding:6px 10px;border-radius:999px;font-size:.82rem;font-weight:600;color:#2f3840;background:#ffffffb3;border:1px solid rgba(255,255,255,.85)}.dot{width:11px;height:11px;border-radius:50%;box-shadow:inset 0 0 0 1px #0000001a}.dot.blue{background:#2ec4b6}.dot.yellow{background:#ffb703}.dot.pink{background:#fb6f92}#hud-panel{border-radius:14px;border:1px solid rgba(255,255,255,.86);background:#ffffffa8;padding:10px;display:grid;gap:8px}.hud-row{display:flex;flex-wrap:wrap;gap:7px}.hud-pill{display:inline-flex;align-items:center;justify-content:center;min-height:30px;padding:4px 10px;border-radius:999px;font-size:.83rem;font-weight:650;color:#2f3840;background:#ffffffbf;border:1px solid rgba(255,255,255,.9);letter-spacing:.01em}.star-pill{font-variant-numeric:tabular-nums}.control-row{display:flex;flex-wrap:wrap;gap:8px}.game-btn{border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-ink);border-radius:10px;padding:7px 11px;font-size:.82rem;font-weight:650;letter-spacing:.01em;cursor:pointer;transition:transform .12s ease,filter .12s ease}.game-btn:hover:not(:disabled){transform:translateY(-1px);filter:brightness(1.03)}.game-btn:disabled{cursor:default;opacity:.48}.game-btn.primary{background:linear-gradient(160deg,#3d7bff,var(--btn-primary));color:#fff;border-color:#4378ede0}#board-frame{position:relative;min-height:0;border-radius:24px;padding:14px;background:var(--frame);border:1px solid var(--frame-border);box-shadow:0 14px 28px #29364533,inset 0 0 0 1px #ffffff73;overflow:hidden;display:grid}#board-frame:before,#board-frame:after{content:"";position:absolute;border-radius:50%;pointer-events:none}#board-frame:before{width:240px;height:240px;right:-80px;top:-80px;background:radial-gradient(circle,#fff9,#fff0)}#board-frame:after{width:200px;height:200px;left:-65px;bottom:-65px;background:radial-gradient(circle,#ffffff73,#fff0)}#game-container{width:100%;height:100%;border-radius:16px;overflow:hidden;display:grid;place-items:center}#game-container canvas{display:block;border-radius:16px}#hint-toast{position:absolute;left:50%;bottom:24px;transform:translate(-50%) translateY(8px);opacity:0;pointer-events:none;background:#232c37e6;color:#f2f6fb;border-radius:999px;padding:8px 14px;font-size:.84rem;font-weight:600;letter-spacing:.01em;transition:opacity .18s ease,transform .18s ease;z-index:80}#hint-toast.visible{opacity:1;transform:translate(-50%) translateY(0)}#win-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:var(--overlay-bg);opacity:0;pointer-events:none;transition:opacity .22s ease;z-index:100}#win-overlay.visible{opacity:1;pointer-events:auto}.win-card{min-width:min(88vw,460px);background:linear-gradient(170deg,#fff,#f2f6fb);border:1px solid rgba(255,255,255,.9);border-radius:18px;box-shadow:0 16px 30px #0f141c52;padding:20px 24px;text-align:center}.win-card h2{margin:0;font-size:clamp(1.5rem,3vw,2.3rem);color:#2d3540}.win-card p{margin:8px 0 0;font-size:1rem;color:#5a6776}.win-stars{margin-top:12px;font-size:1.5rem;letter-spacing:.08em;color:#f4ae2d}.win-summary{font-size:.94rem;color:#586475}.win-actions{margin-top:14px;display:flex;justify-content:center;flex-wrap:wrap;gap:10px}@media(max-width:900px){#game-header{grid-template-columns:1fr}}@media(max-width:720px){body{padding:10px}#game-shell{height:calc(100dvh - 10px);gap:8px}#board-frame{padding:8px;border-radius:16px}#game-container,#game-container canvas{border-radius:10px}.hud-pill,.game-btn{font-size:.78rem}}
